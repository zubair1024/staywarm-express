{"version":3,"sources":["index.es6.js"],"names":[],"mappings":"AAAA,aAAa;;;;;;;;;;;;kBAEE,IAAI;;oBACF,MAAM;;yBACD,WAAW;;gCACV,uBAAuB;;IAE1C,QAAQ,GAAI,uBAAa,CAAC,UAAU,CAAC;IACrC,GAAG,GAAS,OAAO,IAAI,SAAS,IAAI,aAAa;IACjD,MAAM,GAAM,2BAAW,GAAG,CAAC;IAC3B,EAAE,GAAU,EAAE;IACd,SAAS,GAAG,IAAI;;AAEpB,AACE,SAAS,GADX,AAAI,MAAM,iBAAiB,GACb,wBAAc,OAAO,IAAI,CAAC,MAAM,iBAAiB,CAAC,CAAC,GAEnD,wBAAc,MAAM,SAAS,EAAE,MAAM,SAAS,EAAE,MAAM,SAAS,EAAE,MAAM,CAAC,AACrF,EAED,wBACc,CAAC,SAAS,CAAC,OAChB,CAAC,UAAA,CAAI;AACV,SAAO,AAAC,AAAsB,CAAC,KAAvB,CAAI,QAAQ,CAAC,GAAG,CAAC,AAAM,IAAM,CAAI,KAAK,QAAQ,AAAC,IACjD,AAAmB,KAAK,KAAxB,CAAI,MAAM,CAAC,CAAC,CAAC,CAAC,AAAU,AAAC,IAAK,CAAI,YAAY,CAAC,SAAS,CAAC,GAAG,CAAC,AAAC,CAAC;CACtE,CAAC,QACM,CAAC,UAAA,CAAI;AACX,MAAI,CAAK,GAAG,SAAS,OAAU,CAAC,mBAAS,CAAC,SAAS,EAAE,CAAI,CAAC,CAAC,CAAC;AAC5D,IAAE,CAAC,CAAK,KAAK,CAAC,GAAG,CAAK,CAAA;CACvB,CAAC,EAEJ,MAAM,KAAK,CAAC,EAAE,CAAC,QAAQ,CAAC,UAAA,CAAS;AAC/B,AAAI,IAAE,CAAC,CAAS,CAAC,UAAU,IACzB,EAAE,CAAC,CAAS,CAAC,UAAU,CAAC,EAAE,CAAC,AAC5B,CAAA;CACF,CAAC,EAEF,EAAE,UAAU,GAAG,SAAS,EACxB,EAAE,UAAU,sBAAY,oBAET,EAAE,kCAtBhB,CAAA","file":"index.js","sourcesContent":["'use strict';\r\n\r\nimport fs from 'fs';\r\nimport path from 'path';\r\nimport Sequelize from 'sequelize';\r\nimport configJson from '../config/config.json';\r\n\r\nlet basename  = path.basename(__filename);\r\nlet env       = process.env.NODE_ENV || 'development';\r\nlet config    = configJson[env];\r\nlet db        = {};\r\nlet sequelize = null;\r\n\r\nif (config.use_env_letiable) {\r\n  sequelize = new Sequelize(process.env[config.use_env_letiable]);\r\n} else {\r\n  sequelize = new Sequelize(config.database, config.username, config.password, config);\r\n}\r\n\r\nfs\r\n  .readdirSync(__dirname)\r\n  .filter(file => {\r\n    return (file.indexOf('.') !== 0) && (file !== basename)\r\n      && (file.slice(-3) === '.js') && (file.lastIndexOf('.es6.js') < 0);\r\n  })\r\n  .forEach(file => {\r\n    let model = sequelize['import'](path.join(__dirname, file));\r\n    db[model.name] = model;\r\n  });\r\n\r\nObject.keys(db).forEach(modelName => {\r\n  if (db[modelName].associate) {\r\n    db[modelName].associate(db);\r\n  }\r\n});\r\n\r\ndb.sequelize = sequelize;\r\ndb.Sequelize = Sequelize;\r\n\r\nexport default db;\r\n"]}